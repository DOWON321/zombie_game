<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ë„ì›ì´ì˜ ì¢€ë¹„ê²Œì„</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: black;
    }
    #gameCanvas {
      display: block;
      background: url('ë² ê²½.png') no-repeat center center;
      background-size: cover;
    }
    #startScreen, #gameOverScreen {
      position: absolute;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      font-size: 2em;
      z-index: 2;
    }
    #scoreBoard {
      position: absolute;
      top: 10px;
      right: 10px;
      color: white;
      font-size: 24px;
      z-index: 2;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 1em;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <audio id="bgm" src="ì¢€ë¹„ê²Œì„.m4a" loop></audio>
  <audio id="ì¹¼Sound" src="ì¹¼.mp3"></audio>
  <audio id="ì´Sound" src="ì´.mp3"></audio>
  <audio id="ìˆ˜ë¥˜íƒ„Sound" src="ìˆ˜ë¥˜íƒ„.mp3"></audio>
  <audio id="í™”ì—¼ë³‘Sound" src="í™”ì—¼ë³‘.mp3"></audio>
  <audio id="í­ë°œSound" src="í­ë°œ.mp3"></audio>

  <div id="startScreen">
    <h1 style="animation: fadeIn 2s ease-in-out;">ğŸ§Ÿ ë„ì›ì´ì˜ ì¢€ë¹„ê²Œì„</h1>
    <p>â–¶ ë°©í–¥í‚¤ë¡œ ì´ë™, ìŠ¤í˜ì´ìŠ¤ë°”ë¡œ ê³µê²©</p>
    <p>â–¶ ì•„ì´í…œì„ ë¨¹ìœ¼ë©´ ë¬´ê¸°ê°€ ë°”ë€ë‹ˆë‹¤!</p>
    <button onclick="startGame()">ê²Œì„ ì‹œì‘</button>
  </div>

  <div id="gameOverScreen" style="display:none">
    <h1>ê²Œì„ ì˜¤ë²„!</h1>
    <p id="finalScore"></p>
    <button onclick="restartGame()">ë‹¤ì‹œ ì‹œì‘</button>
  </div>

  <div id="scoreBoard">ì ìˆ˜: 0</div>

  <canvas id="gameCanvas" width="800" height="600"></canvas>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const bgm = document.getElementById('bgm');
    const sfx = {
      ì¹¼: document.getElementById('ì¹¼Sound'),
      ëŒê²©ì†Œì´: document.getElementById('ì´Sound'),
      ìˆ˜ë¥˜íƒ„: document.getElementById('ìˆ˜ë¥˜íƒ„Sound'),
      í™”ì—¼ë³‘: document.getElementById('í™”ì—¼ë³‘Sound'),
      í­ë°œ: document.getElementById('í­ë°œSound')
    };

    const startScreen = document.getElementById('startScreen');
    const gameOverScreen = document.getElementById('gameOverScreen');
    const finalScore = document.getElementById('finalScore');
    const scoreBoard = document.getElementById('scoreBoard');

    const images = {};
    const keys = {};
    let player, zombies, items, effects, score, health, weapon, gameLoopId, spawnRate, zombieSpeed, boss;

    function loadImages() {
      const names = ['ë„ì›', 'ì¢€ë¹„', 'ë³´ìŠ¤ì¢€ë¹„', 'ì¹¼', 'ëŒê²©ì†Œì´', 'ìˆ˜ë¥˜íƒ„', 'í™”ì—¼ë³‘', 'ì¹¼_ì´í™íŠ¸', 'ëŒê²©ì†Œì´_ì´ì•Œ', 'ìˆ˜ë¥˜íƒ„_í­ë°œ', 'í™”ì—¼ë³‘_ë¶ˆê½ƒ'];
      for (const name of names) {
        images[name] = new Image();
        images[name].src = name + '.png';
      }
    }

    function resetGame() {
      player = { x: 400, y: 300, speed: 5 };
      zombies = [];
      items = [];
      effects = [];
      score = 0;
      health = 100;
      weapon = 'ì¹¼';
      spawnRate = 2000;
      zombieSpeed = 1;
      boss = null;
      scoreBoard.textContent = 'ì ìˆ˜: 0';
    }

    function spawnZombie() {
      const x = Math.random() * canvas.width;
      const y = Math.random() * canvas.height;
      zombies.push({ x, y });
    }

    function spawnItem() {
      const types = ['ì¹¼', 'ëŒê²©ì†Œì´', 'ìˆ˜ë¥˜íƒ„', 'í™”ì—¼ë³‘'];
      const type = types[Math.floor(Math.random() * types.length)];
      const x = Math.random() * canvas.width;
      const y = Math.random() * canvas.height;
      items.push({ x, y, type });
    }

    function spawnBoss() {
      boss = { x: 50, y: 50, hp: 100 };
    }

    function update() {
      if (keys['ArrowUp']) player.y -= player.speed;
      if (keys['ArrowDown']) player.y += player.speed;
      if (keys['ArrowLeft']) player.x -= player.speed;
      if (keys['ArrowRight']) player.x += player.speed;

      zombies.forEach(z => {
        const dx = player.x - z.x;
        const dy = player.y - z.y;
        const dist = Math.hypot(dx, dy);
        z.x += (dx / dist) * zombieSpeed;
        z.y += (dy / dist) * zombieSpeed;
        if (dist < 30) health -= 0.5;
      });

      if (boss) {
        const dx = player.x - boss.x;
        const dy = player.y - boss.y;
        const dist = Math.hypot(dx, dy);
        boss.x += (dx / dist) * (zombieSpeed / 2);
        boss.y += (dy / dist) * (zombieSpeed / 2);
        if (dist < 60) health -= 1;
      }

      if (health <= 0) {
        endGame();
        return;
      }

      items = items.filter(i => {
        const dx = i.x - player.x;
        const dy = i.y - player.y;
        if (Math.hypot(dx, dy) < 30) {
          weapon = i.type;
          return false;
        }
        return true;
      });

      if (score >= 20 && !boss) spawnBoss();
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.drawImage(images['ë„ì›'], player.x, player.y, 50, 50);
      zombies.forEach(z => ctx.drawImage(images['ì¢€ë¹„'], z.x, z.y, 50, 50));
      if (boss) ctx.drawImage(images['ë³´ìŠ¤ì¢€ë¹„'], boss.x, boss.y, 80, 80);
      items.forEach(i => ctx.drawImage(images[i.type], i.x, i.y, 30, 30));
      effects.forEach(e => ctx.drawImage(images[e.image], e.x, e.y, 50, 50));
      ctx.fillStyle = 'red';
      ctx.fillRect(10, 10, health * 2, 10);
    }

    function attack() {
      sfx[weapon].currentTime = 0;
      sfx[weapon].play();

      effects.push({ x: player.x, y: player.y, image: weapon + (weapon === 'ëŒê²©ì†Œì´' ? '_ì´ì•Œ' : weapon === 'ìˆ˜ë¥˜íƒ„' ? '_í­ë°œ' : weapon === 'í™”ì—¼ë³‘' ? '_ë¶ˆê½ƒ' : '_ì´í™íŠ¸') });
      setTimeout(() => effects.shift(), 300);

      zombies = zombies.filter(z => {
        const dx = player.x - z.x;
        const dy = player.y - z.y;
        const dist = Math.hypot(dx, dy);
        if (dist < 60) {
          score++;
          scoreBoard.textContent = 'ì ìˆ˜: ' + score;
          return false;
        }
        return true;
      });

      if (boss) {
        const dx = player.x - boss.x;
        const dy = player.y - boss.y;
        if (Math.hypot(dx, dy) < 80) {
          boss.hp -= 10;
          if (boss.hp <= 0) {
            score += 10;
            boss = null;
            sfx['í­ë°œ'].play();
            scoreBoard.textContent = 'ì ìˆ˜: ' + score;
          }
        }
      }
    }

    function loop() {
      update();
      draw();
    }

    function startGame() {
      startScreen.style.display = 'none';
      bgm.play();
      resetGame();
      loadImages();
      setInterval(() => spawnZombie(), spawnRate);
      setInterval(() => spawnItem(), 5000);
      setInterval(() => {
        if (spawnRate > 500) spawnRate -= 100;
        zombieSpeed += 0.2;
      }, 10000);
      gameLoopId = setInterval(loop, 1000 / 60);
    }

    function endGame() {
      clearInterval(gameLoopId);
      bgm.pause();
      finalScore.textContent = 'ìµœì¢… ì ìˆ˜: ' + score;
      gameOverScreen.style.display = 'flex';
    }

    function restartGame() {
      gameOverScreen.style.display = 'none';
      startGame();
    }

    window.addEventListener('keydown', e => {
      keys[e.key] = true;
      if (e.key === ' ') attack();
    });

    window.addEventListener('keyup', e => {
      keys[e.key] = false;
    });
  </script>
</body>
</html>